# BiocDeployable Template for Quarto documents

This is a BiocDeployable template repository, notably for rendering and deploying Quarto documents.

## Source QMD files

In the [`vignettes/`](./vignettes) directory, you fill find the source Quarto Markdown (.qmd) files,
representing the material to be rendered and deployed.

By default, this repository will have an example file containing both R and Python code.
You can start by renaming and editing the example file.
You can add as many qmd files as you want in the `vignettes/` directory, all of which will render all
output formats in the [`autogenerated/quarto` directory](./autogenerated/quarto), as well as build
Docker images with installed dependencies and rendered documents.

### Dependencies

Some dependencies do not have to explicitly defined, and will be scraped at runtime by [a script](.github/scripts/install_missing.sh)
in the GitHub Action, including:
  - R packages hosted by CRAN (eg: `install.packages("packagename")`)
  - R packages hosted by Bioconductor (eg: `BiocManager::install("packagename")`)
  - Python modules hosted by PyPi (eg: `pip install packagename`)

### TODO: Additional dependencies declaration

## GitHub Actions 

This repository notably includes the following GitHub actions:

| Description                                                        | Job Source                                                                       | Outputs                                                                    | Trigger             |
|--------------------------------------------------------------------|----------------------------------------------------------------------------------|----------------------------------------------------------------------------|---------------------|
| Installing dependencies and Rendering Quarto documents             | [quarto_rendering.yaml](./.github/workflows/quarto_rendering.yaml#L6)               | [`autogenerated/quarto` directory](./autogenerated/quarto)                 | Every pushed commit |
| Building Bioconductor RStudio Docker image                         | [docker_build.yaml#buildrstudio](./.github/workflows/quarto_rendering.yaml#L44)       | `ghcr.io/REPOSITORY_OWNER/REPOSITORY_NAME:biocrstudio-BRANCH` docker image | Every pushed commit |
| Building Jupyter Docker image for deployment in Galaxy             | [docker_build.yaml#buildgxyjupyter](./.github/workflows/quarto_rendering.yaml#L74)   | `ghcr.io/REPOSITORY_OWNER/REPOSITORY_NAME:gxyjupyter-BRANCH`  docker image | Every pushed commit |
| Building Bioconductor RStudio Docker image for deployment on AnVIL | [docker_build.yaml#buildanvilrstudio](./.github/workflows/quarto_rendering.yaml#L104) | `ghcr.io/REPOSITORY_OWNER/REPOSITORY_NAME:biocanvil-BRANCH`  docker image  | Every pushed commit |


## Outputs

The GitHub actions listed in the table above will generate two kinds of outputs:
  - Documents rendered by Quarto from the source QMD files, which will be pushed by the action in the [`autogenerated/quarto` directory](./autogenerated/quarto) within your GitHub repository.
  - Docker images which will be pushed to the [GitHub Container Registry](https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry) with the name of your GitHub repository.

